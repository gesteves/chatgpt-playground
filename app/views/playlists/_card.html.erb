<div class="card">
  <div class="card-image">
    <% if playlist.processing? %>
      <div class="skeleton-block" style="height: 152px"></div>
    <% else %>
      <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/<%= playlist.spotify_playlist_id %>" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
    <% end %>
  </div>
  <div class="card-content">
    <% if playlist.processing? %>
      <div class="content skeleton-lines">
        <div></div>
        <div></div>
        <div></div>
      </div>
    <% else %>
      <div class="content">
        <strong><%= playlist.name %></strong><br><%= playlist.description %>
      </div>
    <% end %>
    <hr>
    <div class="field is-grouped is-grouped-right">
      <%= button_to regenerate_playlist_path(playlist), method: :post, data: { turbo_confirm: 'Are you sure you want to regenerate this playlist?' }, disabled: playlist.processing? || playlist.locked?, class: "button is-small" do %>
        <span class="icon">
          <i class="fa-solid fa-sparkles"></i>
        </span>
      <% end %>
      <%= button_to regenerate_cover_playlist_path(playlist), method: :post, data: { turbo_confirm: 'Are you sure you want to regenerate this playlistâ€™s cover art?' }, disabled: playlist.processing? || playlist.locked?, class: "button is-small" do %>
        <span class="icon">
          <i class="fa-solid fa-album"></i>
        </span>
      <% end %>
      <%= button_to toggle_lock_playlist_path(playlist), method: :post, data: { turbo_confirm: lock_button_confirmation_message(playlist) }, disabled: playlist.processing?, class: "button is-small #{'is-danger is-light' if playlist.locked?}" do %>
        <% if playlist.locked? %>
          <span class="icon">
            <i class="fa-solid fa-lock"></i>
          </span>
        <% else %>
          <span class="icon">
            <i class="fa-solid fa-lock-open"></i>
          </span>
        <% end %>
      <% end %> 
    </div>
  </div>
</div>
